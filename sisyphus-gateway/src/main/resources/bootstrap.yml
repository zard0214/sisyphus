server:
  port: 8080
spring:
  main:
    allow-bean-definition-overriding: true
  cloud:
    nacos:
      config:
        group: SISYPHUS
        server-addr: ${NACOS_HOST:localhost}:${REGISTER_PORT:8848}
        file-extension: yml
        prefix: sisyphus-gateway
      discovery:
        group: SISYPHUS
        server-addr: ${NACOS_HOST:localhost}:${REGISTER_PORT:8848}
        service: sisyphus-gateway
    sentinel:
      enabled: true
      eager: true
      transport:
        dashboard: ${SENTINEL_DASHBOARD_HOST:localhost}:${SENTINEL_DASHBOARD_PORT:8848}
        port: ${SENTINEL_TRANSPORT_PORT:8021}
        client-ip: ${SENTINEL_DASHBOARD_HOST:localhost}
      scg:
        fallback:
          mode: response
          response-status: 455
          response-body: error!
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allowedHeaders: "*"
            allowedOrigins: "*"
            allowedMethods:
              - GET
                POST
                DELETE
                PUT
                OPTION
      discovery:
        locator:
          lowerCaseServiceId: true
          enabled: true
      routes:
        - id: sisyphus-authorize
          uri: lb://sisyphus-authorize
          predicates:
            - Path=/auth/**
        - id: sisyphus-uac
          uri: lb://sisyphus-uac
          predicates:
            - Path=/uac/**
        - id: sisyphus-udc
          uri: lb://sisyphus-udc
          predicates:
            - Path=/udc/**
        - id: sisyphus-toc
          uri: lb://sisyphus-toc
          predicates:
            - Path=/toc/**
        - id: sisyphus-ccc
          uri: lb://sisyphus-ccc
          predicates:
            - Path=/ccc/**
        - id: sisyphus-scc
          uri: lb://sisyphus-scc
          predicates:
            - Path=/scc/**
        - id: sisyphus-ucc
          uri: lb://sisyphus-ucc
          predicates:
            - Path=/ucc/**
management:
  endpoints:
    web:
      exposure:
        include: "*"